<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      MSS Clamping As A Tale Of Network Visibility &middot; GalSagie
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="http://galsagie.github.io/public/img/my_image.jpg" alt="MyImage" width="200" height="200" /></p>
    <p>My blog about everything related to SDN, NFV, Virtualization and Cloud</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/archive/">Site Archives</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
        
      
    
      
    
      
        
          <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
        
      
    
    
  </nav>
  
   <div class="sidebar-item">
    <p>
      <a href="https://github.com/GalSagie"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/GalSagie"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/pub/gal-sagie/14/1ab/577"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://galsagie.github.io/feed.xml"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>
      &copy; 2015. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">GalSagie</a>
            <small>A blog about network virtualization and cloud</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">MSS Clamping As A Tale Of Network Visibility</h1>
  <span class="post-date">15 Jan 2015</span>
  <p>Path MTU Discovery is a standardized method of finding the maximum transmission unit (MTU) between two IP hosts. 
(IP fragmentation usually introduces latency and is a performance bottleneck which we want to avoid even in IPv4)</p>

<p>For IPv4, Path MTU Discovery works by setting the &quot;Dont Fragment&quot; (DF) flag in the IP header and sending the packet to the other host. </p>

<p>Any device along the path whose MTU is smaller than the packet will drop it, 
and send back an ICMP Fragmentation Needed message containing its MTU, lowering the MTU and 
continuing this process until reaching our end host lets us adjust the MTU of the path.</p>

<p>This approach is nice in theory but still has a lot of issues, 
mainly the fact that security devices along the path tend to block ICMP messages.</p>

<p>In order to overcome this, TCP Clamping is introduced.</p>

<p>The way TCP Clamping solves this is by leveraging the MSS option in the TCP header, 
for each SYN packet, each device along the path, with TCP Clamping enabled, sets the packet MSS size to be adjusted according to its MTU. </p>

<p>By the time the packet is reached at the end host, the MSS can represent the MTU of the path.
(There are some consideration when applying MSS Clamping on a PE Router, for example
DDoS attacks, You can get more information <a href="http://media.blubrry.com/ipspace/www.ipSpace.net/nuggets/podcast/X1%20TCP%20MSS%20Clamping.mp4">here.</a></p>

<p>Why is this interesting you ask or even relevant to the topic?</p>

<p>First, because MTU issues are something that operators fail with when deploying networking virtualization solutions that uses overlay tunneling.</p>

<p>But more importantly, this remind me that even in today&#39;s SDN time we still don&#39;t have 
full visibility of the path and the devices along the path between two end points in our network, even inside our data center.</p>

<p>Of course some solutions which integrate SDN software and hardware claim they do, 
but when you start integrating network devices and functions from various vendors, 
you find out we still have a long way to go until everything is integrated with the controller. </p>

<p>Solutions like MSS Clamping solves this in a distributed way, in the next posts I am going
to describe some of the challenges of understanding the logical and more importantly, 
physical path between two VM&#39;s in the data center and different approaches to handle these challenges.</p>

<p>When virtual and physical networking start to mix, root cause analysis of the problem is getting a lot more important, 
OAM aspects needs to be thought of, and in my opinion starting now.</p>

<p>Stay tuned for the next post...</p>

  <span class="post-date">Tags:
    
    


  <a href="http://galsagie.github.io/tags/#OAM">OAM</a>
  
    &middot;
  

  <a href="http://galsagie.github.io/tags/#SDN">SDN</a>
  



  </span>
  
  
    <span class="post-date">
    Next Post: <a href="/ovs/virtualization/2015/01/16/ovn-distributed-controller/">OVN and Distributed Controller</a> &rarr;</span>
  

  <span class="post-sharing"><p>Be social and share this post!<br />

<a href="https://www.facebook.com/sharer/sharer.php?u=http://galsagie.github.io/oam/virtualization/2015/01/15/mss-clamping/" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a> 
<a href="https://twitter.com/intent/tweet?text=http://galsagie.github.io/oam/virtualization/2015/01/15/mss-clamping/" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a> 
<a href="https://plus.google.com/share?url=http://galsagie.github.io/oam/virtualization/2015/01/15/mss-clamping/" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p></span>
</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="http://galsagie.github.io/sdn/nfv/virtualization/2015/01/25/nfv-acceleration-2/">
            NFV Acceleration (Part 2)
            <small>25 Jan 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="http://galsagie.github.io/sdn/oam/virtualization/2015/01/23/topology-visibility/">
            Topology Visibility in Virtualized Environments
            <small>23 Jan 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="http://galsagie.github.io/sdn/nfv/virtualization/2015/01/21/nfv-acceleration/">
            NFV Acceleration (Part 1)
            <small>21 Jan 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

  <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'galsagie'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
 
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=10238945; 
var sc_invisible=0; 
var sc_security="ea2d3a16"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="shopify visitor
statistics" href="http://statcounter.com/shopify/"
target="_blank"><img class="statcounter"
src="http://c.statcounter.com/10238945/0/ea2d3a16/0/"
alt="shopify visitor statistics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide --> 

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
